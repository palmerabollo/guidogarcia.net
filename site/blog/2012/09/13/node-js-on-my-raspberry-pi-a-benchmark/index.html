<!DOCTYPE html><html><head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="Call me Sam, a theme for Hugo.">

<meta name="twitter:card" content="summary">
<meta name="twitter:domain" content="http://guidogarcia.net/">

<meta name="twitter:image" content="http://guidogarcia.net/tn.png">
<meta name="twitter:title" property="og:title" itemprop="title name" content="Call me Guido">
<meta name="twitter:description" property="og:description" itemprop="description" content="Call me Sam, a theme for Hugo.">
<meta name="og:type" content="website">
<meta name="og:url" content="http://guidogarcia.net/">
<meta name="og:image" itemprop="image primaryImageOfPage" content="http://guidogarcia.net/tn.png">

<link rel="shortcut icon" href="http://guidogarcia.net/sam.ico" id="favicon">
<link rel="stylesheet" href="http://guidogarcia.net/css/style.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>







<title>

Node.js running on my Raspberry Pi. A benchmark.

</title></head><body>
<div class="wrap">
<div class="section" id="title">Node.js running on my Raspberry Pi. A benchmark.</div>

<div class="section" id="content">

<p>Few weeks ago I could not resist the temptation to buy a <a href="http://www.raspberrypi.org/">Raspberry Pi</a>, the super-cheap 35$ computer that comes with 256MB of RAM and a ARM CPU running at 700MHz and fits in your pocket (more information in <a href="http://en.wikipedia.org/wiki/Raspberry_Pi">wikipedia</a>).</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/RaspberryPi.jpg/300px-RaspberryPi.jpg" alt="Raspberry Pi (wikipedia)" /></p>

<p>See how nice it looks. I am more of a software guy, so the first thing I did was to install <strong>node.js</strong> (v0.6.19) develop the simplest web server you can create in node (5 lines, it simply returns a 200 HTTP response code without any contents) and put the beast to work.</p>

<pre><code>var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200);
  res.end(); 
}).listen(1337);
</code></pre>

<h3 id="the-benchmark">The benchmark</h3>

<p>I was interested in testing the number of requests per second the application was able to handle running on the Raspberry in the most optimistic scenario. After having some problems running <a href="http://code.google.com/p/httperf/"><strong>httperf</strong></a> and <a href="https://github.com/menavaur/Autobench"><strong>autobench</strong></a> on Mac OS, I finally went with <a href="httpd.apache.org/docs/2.2/programs/ab.html"><strong>apachebench</strong></a> (ab), that can be used to do simple load testings.</p>

<p>These are the results of sending 5120 requests to the node web server, at different concurrency levels, using the following command:</p>

<pre><code>ab -n 5120 -c &lt;concurrency&gt; http://192.168.1.36:1337/
</code></pre>

<p><a href="http://guidogarcia.net/blog/wp-content/uploads/2012/09/raspberry_concurrency.png"><img src="http://guidogarcia.net/blog/wp-content/uploads/2012/09/raspberry_concurrency-300x282.png" alt="raspberry benchmark results" />
</a></p>

<p>Additional information: Each concurrency level has been executed three times from my laptop and using a wifi connection; the graph shows the average value. The Raspberry Pi was running the Raspbian “wheezy” image (<a href="http://www.raspberrypi.org/downloads">downloads</a>).</p>

<h3 id="open-points">Open points</h3>

<p>Almost <strong>200 requests per second</strong> in this non real world application that does nothing. It is not bad, enough to develop and try the ideas I have in mind. To be honest, I still do not know why the performance drops so much when the concurrency is 512, or which part (my laptop vs the raspberry) is the bottleneck and why. Any ideas?</p>

<p>I have to measure other aspects like CPU and memory usage. In a quick glance, it seems that the CPU quickly goes over 90% usage even with small concurrency leves. I still appreciate this piece of hardware, but in the future I will try to overclock the processor. The memory was under 10%, what is not strange in this simple application.</p>

<p>I am also waiting for the Java Virtual Machine, that is supposed to be included in the default file system in future releases, to repeat the benchmarks (and probably see how it eats the memory).</p>

<p>It seems interesting, from a research point of view, to <a href="http://www.zdnet.com/raspberry-pi-meets-lego-in-supercomputer-like-cluster-photos-7000004209/">build a cluster</a> and see how it scales. Donations for this purpose are highly appreciated :)</p>
</div>


<div class="section bottom-menu"><hr/><p>


<a href="/posts">Hello. Call me Guido</a>


&#183; <a href="https://twitter.com/palmerabollo">Twitter</a>

&#183; <a href="http://guidogarcia.net/"></a></p></div>


<div class="section footer"></div>
</div>
</body></html>